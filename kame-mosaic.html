<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=us-ascii" />
<link rel="stylesheet" href="style.css" type="text/css" media="all" />
<script type="text/JavaScript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<title>The KAME project</title>
</head>
<body>

<div class="center">
<div id="canvas" style="display: none;"><canvas id="anime" width="124" height="100"></canvas></div>
<img id="gif" src="/img/kame-mosaic-small.gif" /><br />
This is a MOSAIC version.<br />
If you migrate to IPv6 HTTP, you'll be able to view the NON-MOSAIC DANCING KAME!
</div>

<script type="text/JavaScript">
<!--
$(document).ready(function() {
  var canvas = document.getElementById('anime');
  if (! canvas || ! canvas.getContext) {
    return false;
  }
  $('img#gif').remove();
  $('div#canvas').show();
  var ctx;
  var img = new Array();
  var count = 0;
  var max = 17;
  ctx = canvas.getContext('2d');
  for (i = 0; i <= max; i++) {
    img[i] = new Image();
    img[i].src = "/img/anime/kame-mosaic-small-" + i + ".png";
  }
  if ( /Android\s2\.[0|1]/.test(navigator.userAgent)) {
    // ugly hack for Android2.0/2.1
    var rate = Math.sqrt(320 / screen.width);
    ctx.scale(rate, rate);
  }
  // xxx: img[max] should not be the last session. other sessions may be delayed
  img[max].onload = function() {
    setInterval(function() {
      ctx.clearRect(0, 0, 124, 100)
      ctx.drawImage(img[count], 0, 0);
      count++;
      if (count > max) {
        count = 0;
      }
    }, 100);
  }
});
// -->
</script>

</body>
</html>
